<!--
  This file is automatically imported by NuGet into a user's project
  when it targets a single framework, or in classic (pre 2017) csproj projects.
-->
<Project TreatAsLocalProperty="TaskAssembly">
  <PropertyGroup>
    <TaskFolder Condition=" '$(MSBuildRuntimeType)' == 'Core' ">netstandard2.1</TaskFolder>
    <TaskFolder Condition=" '$(MSBuildRuntimeType)' != 'Core' ">net472</TaskFolder>
    <TaskAssembly Condition="Exists('$(MSBuildThisFileDirectory)..\tasks\$(TaskFolder)\GitBuildInfo.dll')">$(MSBuildThisFileDirectory)..\tasks\$(TaskFolder)\GitBuildInfo.dll</TaskAssembly>
    <TaskAssembly Condition="!Exists('$(MSBuildThisFileDirectory)..\tasks\$(TaskFolder)\GitBuildInfo.dll')">$(MSBuildThisFileDirectory)..\bin\Any CPU\$(Configuration)\$(TaskFolder)\GitBuildInfo.dll</TaskAssembly>
    <error Condition="!Exists('$(TaskAssembly)')">Task Assembly does not exist.</error>
  </PropertyGroup>

  <ItemGroup Condition="Exists('$(MSBuildThisFileDirectory)..\tasks\$(TaskFolder)\GitBuildInfo.dll')">
    <!-- Only add these analyzers when installed as a package from nuget. -->
    <PackageReference Include="Microsoft.DotNet.Analyzers.Compatibility" Version="0.2.12-alpha">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="SecurityCodeScan" Version="3.5.3">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="SonarAnalyzer.CSharp" Version="8.17.0.26580">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="StyleCop.Analyzers" Version="1.2.0-beta.164">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
    </PackageReference>
    <PackageReference Include="IDisposableAnalyzers" Version="3.4.8">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
  </ItemGroup>

  <UsingTask TaskName="GitBuildInfo.GitBuildInfoTask" AssemblyFile="$(TaskAssembly)" />
  <UsingTask TaskName="GitBuildInfo.GitBuildInfoGenericTask" AssemblyFile="$(TaskAssembly)" />
</Project>
